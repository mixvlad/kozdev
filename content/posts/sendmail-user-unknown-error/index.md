---
title: "Настройка Sendmail, если MX-запись указывает на другой сервер"
date: 2019-05-21
---

Если почта вашего домена размещена на почтовом сервере в другой доменной зоне, необходимо сообщить об этом sendmail. В противном случае при попытке отправить письмо пользователю вашего домена вы получите ошибку в **/var/log/mail.log**:

**_User unknown._**

Это значит, что sendmail пытается найти пользователя, указанного в письме, на локальном сервере и не может его найти, потому что почта обслуживается на другом IP-адресе. Чтобы решить эту проблему, нужно указать sendmail искать пользователей вашего домена на удалённом сервере.

Откройте для редактирования файл **/etc/mail/sendmail.mc**:

```bash
sudo nano /etc/mail/sendmail.mc
```

Добавьте эти две строки в конец файла:

```
define(`MAIL_HUB', `your.domain.com.')dnl
define(`LOCAL_RELAY', `your.domain.com.')dnl
```

Нажмите «**Ctrl + X**» для выхода и подтвердите сохранение файла.

Теперь перезапустите службу sendmail:

```bash
service sendmail reload
```

Попробуйте отправить письмо снова. Если всё сделано правильно, письма будут отправляться через удалённый почтовый сервер без ошибок.
